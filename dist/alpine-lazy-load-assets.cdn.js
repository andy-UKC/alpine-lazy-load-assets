(()=>{function l(d){d.store("lazyLoadedAssets",{loaded:new Set,check(e){return Array.isArray(e)?e.every(o=>this.loaded.has(o)):this.loaded.has(e)},markLoaded(e){Array.isArray(e)?e.forEach(o=>this.loaded.add(o)):this.loaded.add(e)}});function i(e){return new CustomEvent(e,{bubbles:!0,composed:!0,cancelable:!0})}async function m(e,o){if(document.querySelector(`link[href="${e}"]`)||d.store("lazyLoadedAssets").check(e))return;let t=document.createElement("link");t.type="text/css",t.rel="stylesheet",t.href=e,o&&(t.media=o),document.head.append(t),await new Promise((a,r)=>{t.onload=()=>{d.store("lazyLoadedAssets").markLoaded(e),a()},t.onerror=()=>{r(new Error(`Failed to load CSS: ${e}`))}})}async function u(e,o){if(document.querySelector(`script[src="${e}"]`)||d.store("lazyLoadedAssets").check(e))return;let t=document.createElement("script");t.src=e,o.has("body-start")?document.body.prepend(t):document[o.has("body-end")?"body":"head"].append(t),await new Promise((a,r)=>{t.onload=()=>{d.store("lazyLoadedAssets").markLoaded(e),a()},t.onerror=()=>{r(new Error(`Failed to load JS: ${e}`))}})}d.directive("load-css",(e,{expression:o},{evaluate:t})=>{let a=t(o),r=e.media,n=e.getAttribute("data-dispatch");Promise.all(a.map(s=>m(s,r))).then(()=>{n&&window.dispatchEvent(i(n+"-css"))}).catch(s=>{console.error(s)})}),d.directive("load-js",(e,{expression:o,modifiers:t},{evaluate:a})=>{let r=a(o),n=new Set(t),s=e.getAttribute("data-dispatch");Promise.all(r.map(c=>u(c,n))).then(()=>{s&&window.dispatchEvent(i(s+"-js"))}).catch(c=>{console.error(c)})})}document.addEventListener("alpine:initializing",()=>{l(window.Alpine)});})();
