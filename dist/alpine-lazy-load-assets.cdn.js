(()=>{function m(c){c.store("lazyLoadedAssets",{loaded:new Set,check(e){return Array.isArray(e)?e.every(t=>this.loaded.has(t)):this.loaded.has(e)},markLoaded(e){Array.isArray(e)?e.forEach(t=>this.loaded.add(t)):this.loaded.add(e)}});let u=e=>new CustomEvent(e,{bubbles:!0,composed:!0,cancelable:!0}),b=(e,t={},r,s)=>{let o=document.createElement(e);return Object.entries(t).forEach(([n,a])=>o[n]=a),r&&(s?r.insertBefore(o,s):r.appendChild(o)),o},f=(e,t,r={},s=null,o=null)=>{let n=e==="link"?`link[href="${t}"]`:`script[src="${t}"]`;if(document.querySelector(n)||c.store("lazyLoadedAssets").check(t))return Promise.resolve();let a=e==="link"?{...r,href:t}:{...r,src:t},d=b(e,a,s,o);return new Promise((l,i)=>{d.onload=()=>{c.store("lazyLoadedAssets").markLoaded(t),l()},d.onerror=()=>{i(new Error(`Failed to load ${e}: ${t}`))}})},h=async(e,t,r=null,s=null)=>{let o={type:"text/css",rel:"stylesheet"};t&&(o.media=t);let n=document.head,a=null;if(r&&s){let d=document.querySelector(`link[href*="${s}"]`);d?(n=d.parentElement,a=r==="before"?d:d.nextSibling):(console.warn(`Target (${s}) not found for ${e}. Appending to head.`),n=document.head,a=null)}await f("link",e,o,n,a)},y=async(e,t,r=null,s=null)=>{let o=document.head,n=null;if(r&&s){let a=document.querySelector(`script[src*="${s}"]`);a?(o=a.parentElement,n=r==="before"?a:a.nextSibling):(console.warn(`Target (${s}) not found for ${e}. Falling back to head or body.`),o=document.head,n=null)}else(t.has("body-start")||t.has("body-end"))&&(o=document.body,t.has("body-start")&&(n=document.body.firstChild));await f("script",e,{},o,n)};c.directive("load-css",(e,{expression:t},{evaluate:r})=>{let s=r(t),o=e.media,n=e.getAttribute("data-dispatch"),a=e.getAttribute("data-css-before")?"before":e.getAttribute("data-css-after")?"after":null,d=e.getAttribute("data-css-before")||e.getAttribute("data-css-after")||null;Promise.all(s.map(l=>h(l,o,a,d))).then(()=>{n&&window.dispatchEvent(u(`${n}-css`))}).catch(console.error)}),c.directive("load-js",(e,{expression:t,modifiers:r},{evaluate:s})=>{let o=s(t),n=new Set(r),a=e.getAttribute("data-js-before")?"before":e.getAttribute("data-js-after")?"after":null,d=e.getAttribute("data-js-before")||e.getAttribute("data-js-after")||null,l=e.getAttribute("data-dispatch");Promise.all(o.map(i=>y(i,n,a,d))).then(()=>{l&&window.dispatchEvent(u(`${l}-js`))}).catch(console.error)})}document.addEventListener("alpine:initializing",()=>{m(window.Alpine)});})();
